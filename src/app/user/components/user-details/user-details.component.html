<div *ngIf="user" class="flex flex-col justify-center min-h-5/6 pt-10">
    <div class="font-bold text-2xl pb-10">
        <p>Utilisateur: </p>
    </div>
    <div class="flex flex-row justify-between font-bold text-2xl pb-10">
        <div class="flex flex-col justify-between">
            <p>{{user.username}}</p>
            <p>{{user.firstname}} | {{user.lastname}}</p>
        </div>
        <div>
            <a (click)="toggleActive()" *ngIf="user.isActive" [ngClass]="{'cursor-pointer':!is_locked}" class="w-24 h-6 flex text-center content-center align-middle items-center justify-center bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-green-900 dark:text-green-300">Actif</a>
            <a (click)="toggleActive()" *ngIf="!user.isActive" [ngClass]="{'cursor-pointer':!is_locked}" class="w-24 h-6 flex text-center content-center align-middle items-center justify-center bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full dark:bg-red-900 dark:text-red-300">Inactif</a>
        </div>
   </div>
    <div class="py-4">
        <hr class="">
    </div>
    <div *ngIf="user" (ngSubmit)="put()">
        <div class="grid gap-6 mb-6 md:grid-cols-2">
            <div>
                <label for="username" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nom d'utilisateur</label>
                <input disabled name="username" [(ngModel)]="user.username" type="text" id="username" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
            </div>
            <div>
                <label for="firstname" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nom</label>
                <input [disabled]="is_locked" name="firstname" [(ngModel)]="user.firstname" type="text" id="firstname" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
            </div>
            <div>
                <label for="lastname" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Pr√©nom</label>
                <input [disabled]="is_locked" name="lastname" [(ngModel)]="user.lastname" type="text" id="lastname" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
            </div>
        </div>
    </div>
    <div class="py-4">
        <hr class="">
    </div>
    <div *ngIf="user.roles" class="max-w-full overflow-auto">
        <div class="grid gap-6 mb-6 md:grid-cols-5">
            <div class="font-bold text-xl pb-4 ">
                <h2>Roles:</h2>
            </div>
            <div *ngIf="!is_locked" class="flex flex-row items-center justify-center align-middle col-span-3">
                <div class="mr-4 h-10 w-full">
                    <input type="text" matInput [formControl]="searchRoleSelect"
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                    placeholder="Chercher une licence"
                    [matAutocomplete]="auto">
                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="getRoleName.bind(this)" >
                    <mat-option *ngFor="let role of filteredRoleOptions | async" [value]="role.id">
                        {{role.name}}
                    </mat-option>
                    </mat-autocomplete>
                </div>
                <button mat-button mat-flat-button color="accent" (click)="addRole()">Ajouter</button>
            </div>
        </div>
        <table class="table-auto w-full md:table-fixed">
            <thead class="text-left">
                <tr>
                    <th class="p-3">Nom</th>
                    <th class="p-3"></th>
                </tr>
            </thead>
            <tbody *ngIf="user.roles" class="text-left">
                <tr *ngFor="let role of user.roles">
                    <td class="p-3">{{role.name}}</td>
                    <td class="p-3">
                        <button *ngIf="!is_locked" mat-button mat-flat-button color="warn" (click)="removeRole(role)">Supprimer</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="py-4">
        <hr class="">
    </div>
    <div class="flex flex-row-reverse justify-between">
        <div *ngIf="!is_locked" class="flex flex-row-reverse mb-6">
            <button (click)="put()" mat-button mat-flat-button color="primary">Valider</button>
        </div>
        <div *ngIf="is_locked" class="flex flex-row-reverse mb-6">
            <a (click)="toggleLock()" mat-button mat-flat-button color="accent">Modifier</a>
        </div>
        <div *ngIf="!is_locked" class="flex flex-row-reverse mb-6">
            <a (click)="toggleLock()" mat-button mat-flat-button color="warn">Annuler</a>
        </div>
    </div>
</div>