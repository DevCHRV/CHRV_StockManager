<div class="flex flex-col justify-center min-h-5/6 pt-10 overflow-auto">
    <div class="font-bold text-2xl pb-10 flex flex-row justify-between">
        <h2>Commande: </h2>
    </div>
    <form [formGroup]="form">
        <div class="grid gap-6 mb-6 md:grid-cols-2">
            <div>
                <label for="date" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Date</label>
                <input name="date" formControlName="date" [ngModel]="order.date | date:'yyyy-MM-dd'" (ngModelChange)="order.date=$event" type="date" id="date" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
            </div>
        </div>
        <div class="py-4 ">
            <hr class="bg-black">
        </div>
        <div class="flex flex-row justify-between align-middle items-center pb-4">
            <div class="font-bold text-xl">
                <h2>Matériel:</h2>
            </div>
            <a mat-button mat-flat-button color="accent" (click)="createDialog()">Ajouter du matériel</a>
        </div>
        <table class="table-auto md:table-fixed">
            <thead class="text-left">
            <tr>
                <th class="p-3">Type</th>
                <th class="p-3">Référence</th>
                <th class="p-3">Numéro de série</th>
                <th class="p-3">Actions</th>
            </tr>
            </thead>
            <tbody *ngIf="order.items" class="text-left">
            <tr *ngFor="let item of order.items" class="w-full">
                <td class="p-3">{{item.type.name}}</td>
                <td class="p-3">{{item.reference}}</td>
                <td class="p-3">{{item.serial_number}}</td>
                <td class="p-3">
                    <button class="mr-2" (click)="updateDialog(item)" mat-button mat-flat-button color="accent">Modifier</button>
                    <button (click)="removeItem(item)" mat-button mat-flat-button color="warn">Supprimer</button>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="py-4">
            <hr class="">
        </div>
        <div class="flex flex-row-reverse justify-between">
            <div class="flex flex-row-reverse mb-6">
                <button [disabled]="!(order.items.length>0) || !form.valid" (click)="post()" mat-button mat-flat-button color="primary">Valider</button>
            </div>
        </div>
    </form>
</div>
